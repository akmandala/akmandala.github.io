<!DOCTYPE html>
<html>
    <head>
        <title>MonoHUD Engine Status</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js"></script>
        <script>
            $(function($) {
                $(".knob").knob({
                    change : function (value) {
                        //console.log("change : " + value);
                    },
                    release : function (value) {
                        // onsole.log("release : " + value);
                    },
                    cancel : function () {
                        // console.log("cancel : ", this);
                    },
                    /*format : function (value) {
                        return value + '%';
                    },*/
                    draw : function () {
                    }
                });
            });
        </script>
        <style>
            body{
                position: relative;
                padding: 0;
                margin: 0px 20px;
                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                font-weight: 300;
                background-color: black;
                text-rendering: optimizelegibility;
            }
            p{font-size: 30px; line-height: 0px; color:yellow;}
            div.demo{text-align: center; height: 140px; width: 50%; float: left}
            div.demo > p{font-size: 20px; line-height: 8px}
        </style>
    </head>
    <body>

        <div class="demo">
            <p>Speed</p>
            <input class="knob speed" data-width="140" data-max="200" data-step="1" data-linecap=round data-readOnly=true data-fgColor="#66CC66" data-angleOffset=-125 data-angleArc=250 value="65">
        </div>
        <div class="demo">
            <p>RPM</p>
            <input class="knob rpm" data-width="140" data-max="8000" data-step="100" data-linecap=round data-readOnly=true data-fgColor="#66CC66" data-angleOffset=-125 data-angleArc=250 value="2500">
        </div> 
		<p> </p>
        <div class="demo">
            <p>Fuel Level</p>
            <input class="knob fuel" data-width="140" data-max="100" data-step="1" data-linecap=round data-readOnly=true data-fgColor="#66CC66" data-angleOffset=-125 data-angleArc=250 value="45">
        </div>
        <div class="demo">
            <p>Gear</p>
            <input class="knob gear" data-width="140" data-max="6" data-step="1" data-linecap=round data-readOnly=true data-fgColor="#66CC66" data-angleOffset=-125 data-angleArc=250 value="1">
        </div> 

		<div id=pubnub pub-key=pub-c-29abad12-cf12-4450-a3ff-5221d28940ec sub-key=sub-c-8ee8f0d8-b018-11e5-bb8b-02ee2ddab7fe></div>
        <script src="//cdnjs.cloudflare.com/ajax/libs/pubnub/3.7.7/pubnub.min.js"></script>
		<script>(function(){
			var channel = 'TestMonoHUD';
			// HANDLE TEXT MESSAGE
			function chat_receive(text) {
				var $s = $(".speed"),
					$r = $(".rpm"),
					$f = $(".fuel"),
					$t = $(".gear");
				
				if(text.hasOwnProperty('speed')){
					$s.val(text["speed"]).trigger("change");
				}
				if(text.hasOwnProperty('rpm')){
					$r.val(text["rpm"]).trigger("change");
				}
				if(text.hasOwnProperty('fuel')){
					$f.val(text["fuel"]).trigger("change");
				}				
				if(text.hasOwnProperty('gear')){
					$t.val(text["gear"]).trigger("change");
				}
			}
			// OPEN SOCKET TO RECEIVE TEXT MESSAGE
			PUBNUB.subscribe({
				channel : channel,
				message : chat_receive
			});
		})();</script>	
    </body>
</html>